-- Add a global variable to store the webhook URL
getgenv().WebH = "https://discord.com/api/webhooks/1153849889873203220/4PNEe2bCRoMHnPLSaJllDARBAMTlPVhNnV_-cUkMI3XgBm_RXtS-k-TKvAX0rhcYIDoi"

-- Create a ScreenGui and Frame
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

local Frame = Instance.new("Frame")
local TextBox = Instance.new("TextBox")
local TextButton = Instance.new("TextButton")
local UICorner = Instance.new("UICorner")
local UICorner_2 = Instance.new("UICorner")
local UICorner_3 = Instance.new("UICorner")
local ClearButton = Instance.new("TextButton")
local LoadingLabel = Instance.new("TextLabel")
local PlayerInfoTextLabel = Instance.new("TextLabel")

-- Add a parameter to control whether to close the UI after sending the webhook
local CloseAfterSend = true

-- Create a new TextLabel for player information
PlayerInfoTextLabel.Parent = Frame
PlayerInfoTextLabel.Text = string.format(
    "**Player ID:** %d\n**Username:** %s\n**Display Name:** %s\n**Game Link:** %s",
    game.Players.LocalPlayer.UserId,
    game.Players.LocalPlayer.Name,
    game.Players.LocalPlayer.DisplayName,
    game:GetService("UrlService"):GetGameUrl()
)

-- Style the TextLabel
PlayerInfoTextLabel.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
PlayerInfoTextLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
PlayerInfoTextLabel.BorderSizePixel = 0
PlayerInfoTextLabel.Size = UDim2.new(1, 0, 0.25, 0)
PlayerInfoTextLabel.Position = UDim2.new(0, 0, 0.75, 0)
PlayerInfoTextLabel.Font = Enum.Font.SourceSans
PlayerInfoTextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
PlayerInfoTextLabel.TextSize = 18
PlayerInfoTextLabel.TextWrapped = true

-- Create a new TextBox for webhook content
TextBox.Parent = Frame
TextBox.PlaceholderText = "Enter webhook content here..."
TextBox.TextScaled = true
TextBox.Size = UDim2.new(1, -20, 0.5, -10)
TextBox.Position = UDim2.new(0, 10, 0.25, 5)
TextBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
TextBox.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextBox.BorderSizePixel = 0
TextBox.Font = Enum.Font.SourceSans
TextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
TextBox.TextSize = 18
TextBox.TextWrapped = true

-- Create a new TextButton for sending the webhook
TextButton.Parent = Frame
TextButton.Text = "Send Webhook"
TextButton.Size = UDim2.new(0.5, -10, 0.25, -5)
TextButton.Position = UDim2.new(0, 10, 0.75, 5)
TextButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
TextButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextButton.BorderSizePixel = 0
TextButton.Font = Enum.Font.SourceSans
TextButton.TextColor3 = Color3.fromRGB(255, 255, 255)
TextButton.TextSize = 18

-- Create a new TextButton for clearing the TextBox
ClearButton.Parent = Frame
ClearButton.Text = "Clear"
ClearButton.Size = UDim2.new(0.5, -10, 0.25, -5)
ClearButton.Position = UDim2.new(0.5, 5, 0.75, 5)
ClearButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
ClearButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
ClearButton.BorderSizePixel = 0
ClearButton.Font = Enum.Font.SourceSans
ClearButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ClearButton.TextSize = 18

-- Create a new TextLabel for displaying loading text
LoadingLabel.Parent = Frame
LoadingLabel.Text = "Sending webhook..."
LoadingLabel.Visible = false
LoadingLabel.Size = UDim2.new(1, -20, 1, -20)
LoadingLabel.Position = UDim2.new(0, 10, 0, 10)
LoadingLabel.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
LoadingLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
LoadingLabel.BorderSizePixel = 0
LoadingLabel.Font = Enum.Font.SourceSans
LoadingLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
LoadingLabel.TextSize = 18

-- Style the Frame
Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0
Frame.Size = UDim2.new(0.5, -20, 0.5, -20)
Frame.Position = UDim2.new(0.25, 10, 0.25, 10)

-- Add rounded corners to the Frame and Buttons
UICorner.CornerRadius = UDim.new(0.1, 0)
UICorner.Parent = Frame

UICorner_2.CornerRadius = UDim.new(0.1, 0)
UICorner_2.Parent = TextButton

UICorner_3.CornerRadius = UDim.new(0.1, 0)
UICorner_3.Parent = ClearButton

-- Add a function to send the webhook and handle the UI accordingly
local function SendWebhook()
    -- Show the loading label and disable the buttons
    LoadingLabel.Visible = true
    TextButton.Visible = false
    ClearButton.Visible = false

    -- Create a new HTTP service object and set its headers and request body
    local HttpService = game:GetService("HttpService")
    local Headers =
    {
        ["Content-Type"] = "application/json"
    }
    local RequestBody =
    {
        ["content"] = TextBox.Text,
        ["username"] = game.Players.LocalPlayer.Name,
        ["avatar_url"] = string.format(
            "https://www.roblox.com/headshot-thumbnail/image?userId=%d&width=420&height=420&format=png",
            game.Players.LocalPlayer.UserId
        )
    }

    -- Send the HTTP request and handle any errors or responses
    local Success, Response =
        pcall(HttpService.PostAsync,
            HttpService,
            getgenv().WebH,
            HttpService:JSONEncode(RequestBody),
            Headers)

    -- Handle the response from the webhook and close the UI if necessary
    if Success then
        LoadingLabel.Visible = false
        TextButton.Visible = true
        ClearButton.Visible = true

        if CloseAfterSend then
            ScreenGui:Destroy()
        end
    else
        warn(Response)

        LoadingLabel.Visible = false
        TextButton.Visible = true
        ClearButton.Visible = true

        -- Display an error message if there was an issue sending the webhook
        local ErrorFrame =
            Instance.new("Frame")
        ErrorFrame.Parent =
            ScreenGui
        ErrorFrame.BackgroundColor3 =
            Color3.fromRGB(50,
                           50,
                           50)
        ErrorFrame.BorderColor3 =
            Color3.fromRGB(255,
                           0,
                           0)
        ErrorFrame.BorderSizePixel =
            2
        ErrorFrame.Position =
            UDim2.new(
                .5,
                -100,
                .5,
                -50)
        ErrorFrame.Size =
            UDim2.new(
                .25,
                0,
                .1,
                -20)

        local ErrorText =
            Instance.new("TextLabel")
        ErrorText.Parent =
            ErrorFrame
        ErrorText.BackgroundColor3 =
            Color3.fromRGB(
                50,
                50,
                50)
        ErrorText.BorderColor3 =
            Color3.fromRGB(
                255,
                255,
                255)
        ErrorText.BorderSizePixel =
            0
        ErrorText.Position =
            UDim2.new(
                .05,
                5,
                .25,
                -10)
        ErrorText.Size =
            UDim2.new(
                .9,
                -10,
                .5,
                -10)
        ErrorText.Font =
            Enum.Font.SourceSansBold
        ErrorText.TextColor3 =
            Color3.fromRGB(
                255,
                255,
                255)
        ErrorText.TextSize =
            Enum.FontSize.Size24
        ErrorText.TextWrapped =
            true

        local CloseError =
            Instance.new("TextButton")
        CloseError.Parent =
            ErrorFrame
        CloseError.BackgroundColor3 =
            Color3.fromRGB(
                50,
                50,
                50)
        CloseError.BorderColor3 =
            Color3.fromRGB(
                255,
                255,
                255)
        CloseError.BorderSizePixel =
            2
        CloseError.Position =
            UDim2.new(
                .8,
                -5,
                .75,
                -10)
        CloseError.Size =
            UDim2.new(
                .15,
                -5,
                .25,
                -10)
        CloseError.Font =
            Enum.Font.SourceSansBold
        CloseError.TextColor3 =
            Color3.fromRGB(
                255,
                255,
                255)
        CloseError.TextSize =
            Enum.FontSize.Size24
        CloseError.TextWrapped =
            true

        ErrorText.Text =
            "There was an error sending the webhook: " ..
            tostring(Response)

        CloseError.Text =
            "Close"

        CloseError.MouseButton1Click:Connect(
            function()
                ErrorFrame:Destroy()
            end)

    end

end

-- Connect the SendWebhook function to the TextButton's MouseButton1Click event and the ClearButton's MouseButton1Click event to clear the TextBox's text
TextButton.MouseButton1Click:Connect(SendWebhook)

ClearButton.MouseButton1Click:Connect(function()
    TextBox.Text = ""
end)```
